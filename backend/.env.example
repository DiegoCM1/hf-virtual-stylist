# =============================================================================
# HF Virtual Stylist - Backend Environment Variables
# =============================================================================
# Copiar este archivo a .env y llenar con valores reales
# NO hacer commit de .env con credenciales reales

# =============================================================================
# DATABASE
# =============================================================================
# SQLite para desarrollo local (por defecto)
DATABASE_URL=sqlite:///./storage/app.db

# PostgreSQL para producción (Neon/Railway)
# DATABASE_URL=postgresql://user:password@host:5432/database_name

# =============================================================================
# ADMIN & AUTHENTICATION
# =============================================================================
# Contraseña para endpoints admin (cambiar en producción)
ADMIN_PASSWORD=change-me-in-production

# Secreto JWT para firmar tokens (generar con: openssl rand -hex 32)
JWT_SECRET=your-secret-key-change-this-in-production

# Algoritmo JWT (no cambiar a menos que sepas lo que haces)
JWT_ALGORITHM=HS256

# =============================================================================
# STORAGE BACKEND
# =============================================================================
# Opciones: "local" o "r2"
STORAGE_BACKEND=local

# --- Local Storage (desarrollo) ---
# Base URL pública para archivos locales
PUBLIC_BASE_URL=http://localhost:8000/files

# --- Cloudflare R2 (producción) ---
# Descomentar y llenar para usar R2
# R2_ACCOUNT_ID=your-account-id
# R2_ACCESS_KEY_ID=your-access-key-id
# R2_SECRET_ACCESS_KEY=your-secret-access-key
# R2_BUCKET_NAME=harris-and-frank
# R2_PUBLIC_URL=https://pub-xxxxxxxxx.r2.dev

# =============================================================================
# SDXL GENERATION (GPU Pods - RunPod/Vast.ai)
# =============================================================================

# --- Core Settings ---
GUIDANCE=4.3
TOTAL_STEPS=80
USE_REFINER=1
REFINER_SPLIT=0.70

# --- ControlNet Configuration ---
CONTROLNET_ENABLED=1
CONTROLNET_MODEL=lllyasviel/control_v11f1p_sd15_depth
CONTROLNET_WEIGHT=0.9
CONTROLNET_GUIDANCE_START=0.0
CONTROLNET_GUIDANCE_END=0.5

# ControlNet #2 (Canny)
CONTROLNET2_ENABLED=1
CONTROLNET2_MODEL=lllyasviel/control_v11p_sd15_canny
CONTROLNET2_WEIGHT=0.65
CONTROLNET2_GUIDANCE_START=0.05
CONTROLNET2_GUIDANCE_END=0.88

# --- Control Images (Rutas absolutas en pod GPU) ---
CONTROL_IMAGE_RECTO=/workspace/app/backend/assets/control/recto_depth.png
CONTROL_IMAGE_CRUZADO=/workspace/app/backend/assets/control/cruzado_depth.png
CONTROL_IMAGE_RECTO_CANNY=/workspace/app/backend/assets/control/recto_canny.png
CONTROL_IMAGE_CRUZADO_CANNY=/workspace/app/backend/assets/control/cruzado_canny.png

# --- IP-Adapter (Opcional - Experimental) ---
IP_ADAPTER_ENABLED=0
IP_ADAPTER_SCALE=0.70
IP_ADAPTER_MODEL_PATH=/workspace/models/ip-adapter/ip-adapter_sdxl.bin

# --- LoRA (Futuro) ---
# USE_LORA=0
# LORA_PATH=/workspace/models/lora/fabric-algodon-tech.safetensors
# LORA_SCALE=0.8

# --- HuggingFace Cache ---
# Directorio para modelos descargados (importante en pods GPU con volúmenes persistentes)
HF_HOME=/workspace/.cache/huggingface

# --- Watermark ---
WATERMARK_PATH=/workspace/app/backend/assets/watermark.png

# =============================================================================
# LOGGING & DEBUG
# =============================================================================
# Nivel de log: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Habilitar logs detallados de generación
DEBUG_GENERATION=0

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================
# Usar generador mock (sin GPU) para desarrollo
# USE_MOCK_GENERATOR=0

# CORS origins permitidos (separados por coma)
# CORS_ORIGINS=http://localhost:3000,https://your-frontend.vercel.app
